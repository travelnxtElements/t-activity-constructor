<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../t-behavior/t-page-behavior.html">
<link rel="import" href="../t-behavior/t-activity-page-behavior.html">
<!--
A comment describing this element

Example:

    <t-activity-result-constructor></t-activity-result-constructor>    

@demo demo/index.html
-->
<dom-module id="t-activity-result-constructor">
    <template>
        <style>
            :host {
                display: block;
            }
        </style>
    </template>
    <script>
        (function () {

           'use strict' 

            Polymer({

                is: 't-activity-result-constructor',

                behaviors: [
                    TravelNxt.Behaviors.PageBehavior,
                    TravelNxt.Behaviors.ActivityPageBehavior
                ],

                properties: {
                    _constructor: {
                        type: Object,
                        readOnly: true,
                        notify: true
                    }
                },

                observers: [
                    '__pageLoad(visible)'
                ],

                __pageLoad: function (visible) {
                    if (!visible) {
                        return;
                    }

                    this._construct();
                },

                _construct: function () {
                    if (!this.visible) {
                        throw Error('Constructor is not visible!');
                    }

                    if (!this.authToken || !this.searchId || !this.apiBaseUrl) {
                        throw Error("Either 'authToken', 'searchId' or 'apiBaseUrl' is empty!");
                    }

                    this._set_constructor({
                        authToken: this.authToken, 
                        searchId: this.searchId, 
                        apiBaseUrl: this.apiBaseUrl
                    });
                }
            });
        })();
    </script>
</dom-module>
